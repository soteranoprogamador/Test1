--[[
    SCRIPT: Aimbot Universal com Menu Interativo
    AUTOR: Assistente
    DESCRI√á√ÉO: Menu completo com bot√µes para controle total do aimbot
]]

-- Carrega servi√ßos
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local Camera = workspace.CurrentCamera
local LocalPlayer = Players.LocalPlayer

-- Vari√°veis principais
local aimbotEnabled = false
local fovRadius = 120
local fovVisible = true
local smoothness = 0.5
local targetPart = "Head"
local espEnabled = false
local teamCheck = false
local wallCheck = false
local currentTarget = nil
local fovCircle = nil
local espObjects = {}

-- Cores do menu
local colors = {
    background = Color3.fromRGB(25, 25, 35),
    primary = Color3.fromRGB(0, 170, 255),
    secondary = Color3.fromRGB(45, 45, 55),
    text = Color3.fromRGB(255, 255, 255),
    success = Color3.fromRGB(0, 255, 100),
    danger = Color3.fromRGB(255, 50, 50),
    warning = Color3.fromRGB(255, 170, 0)
}

-- Fun√ß√£o para criar o menu principal
local function createMenu()
    -- ScreenGui principal
    local gui = Instance.new("ScreenGui")
    gui.Name = "AimbotMenu"
    gui.ResetOnSpawn = false
    gui.Parent = LocalPlayer:WaitForChild("PlayerGui")
    
    -- Frame principal do menu (arrast√°vel)
    local mainFrame = Instance.new("Frame")
    mainFrame.Name = "MainFrame"
    mainFrame.Size = UDim2.new(0, 280, 0, 400)
    mainFrame.Position = UDim2.new(0.5, -140, 0.5, -200)
    mainFrame.BackgroundColor3 = colors.background
    mainFrame.BorderSizePixel = 0
    mainFrame.Active = true
    mainFrame.Draggable = true
    mainFrame.Parent = gui
    
    -- Sombra
    local shadow = Instance.new("ImageLabel")
    shadow.Name = "Shadow"
    shadow.Size = UDim2.new(1, 20, 1, 20)
    shadow.Position = UDim2.new(0, -10, 0, -10)
    shadow.BackgroundTransparency = 1
    shadow.Image = "rbxassetid://1316045217"
    shadow.ImageColor3 = Color3.new(0, 0, 0)
    shadow.ImageTransparency = 0.5
    shadow.ScaleType = Enum.ScaleType.Slice
    shadow.SliceCenter = Rect.new(10, 10, 118, 118)
    shadow.Parent = mainFrame
    
    -- Barra de t√≠tulo
    local titleBar = Instance.new("Frame")
    titleBar.Name = "TitleBar"
    titleBar.Size = UDim2.new(1, 0, 0, 35)
    titleBar.BackgroundColor3 = colors.secondary
    titleBar.BorderSizePixel = 0
    titleBar.Parent = mainFrame
    
    -- T√≠tulo
    local title = Instance.new("TextLabel")
    title.Name = "Title"
    title.Size = UDim2.new(1, -40, 1, 0)
    title.Position = UDim2.new(0, 10, 0, 0)
    title.BackgroundTransparency = 1
    title.Text = "üéØ AIMBOT UNIVERSAL"
    title.TextColor3 = colors.primary
    title.Font = Enum.Font.GothamBold
    title.TextSize = 16
    title.TextXAlignment = Enum.TextXAlignment.Left
    title.Parent = titleBar
    
    -- Bot√£o fechar
    local closeBtn = Instance.new("TextButton")
    closeBtn.Name = "CloseButton"
    closeBtn.Size = UDim2.new(0, 30, 0, 30)
    closeBtn.Position = UDim2.new(1, -35, 0, 2.5)
    closeBtn.BackgroundColor3 = colors.danger
    closeBtn.Text = "X"
    closeBtn.TextColor3 = colors.text
    closeBtn.Font = Enum.Font.GothamBold
    closeBtn.TextSize = 16
    closeBtn.Parent = titleBar
    
    closeBtn.MouseButton1Click:Connect(function()
        gui:Destroy()
    end)
    
    -- Conte√∫do do menu
    local content = Instance.new("Frame")
    content.Name = "Content"
    content.Size = UDim2.new(1, -20, 1, -45)
    content.Position = UDim2.new(0, 10, 0, 40)
    content.BackgroundTransparency = 1
    content.Parent = mainFrame
    
    -- Criar se√ß√£o de bot√µes
    local yPos = 0
    local spacing = 40
    
    -- Fun√ß√£o para criar bot√£o toggle
    local function createToggleButton(name, description, default, yOffset, callback)
        local btnFrame = Instance.new("Frame")
        btnFrame.Name = name .. "Frame"
        btnFrame.Size = UDim2.new(1, 0, 0, 35)
        btnFrame.Position = UDim2.new(0, 0, 0, yOffset)
        btnFrame.BackgroundTransparency = 1
        btnFrame.Parent = content
        
        local btnBg = Instance.new("Frame")
        btnBg.Name = "Background"
        btnBg.Size = UDim2.new(1, 0, 1, -5)
        btnBg.BackgroundColor3 = colors.secondary
        btnBg.BorderSizePixel = 0
        btnBg.Parent = btnFrame
        
        local UICorner = Instance.new("UICorner")
        UICorner.CornerRadius = UDim.new(0, 6)
        UICorner.Parent = btnBg
        
        local label = Instance.new("TextLabel")
        label.Name = "Label"
        label.Size = UDim2.new(0.7, -10, 1, 0)
        label.Position = UDim2.new(0, 10, 0, 0)
        label.BackgroundTransparency = 1
        label.Text = name .. "\n" .. description
        label.TextColor3 = colors.text
        label.Font = Enum.Font.Gotham
        label.TextSize = 14
        label.TextXAlignment = Enum.TextXAlignment.Left
        label.RichText = true
        label.Parent = btnBg
        
        local toggleIndicator = Instance.new("Frame")
        toggleIndicator.Name = "ToggleIndicator"
        toggleIndicator.Size = UDim2.new(0, 20, 0, 20)
        toggleIndicator.Position = UDim2.new(1, -30, 0.5, -10)
        toggleIndicator.BackgroundColor3 = default and colors.success or colors.danger
        toggleIndicator.BorderSizePixel = 0
        toggleIndicator.Parent = btnBg
        
        local indicatorCorner = Instance.new("UICorner")
        indicatorCorner.CornerRadius = UDim.new(1, 0)
        indicatorCorner.Parent = toggleIndicator
        
        local state = default
        
        local btn = Instance.new("TextButton")
        btn.Name = "Button"
        btn.Size = UDim2.new(1, 0, 1, 0)
        btn.BackgroundTransparency = 1
        btn.Text = ""
        btn.Parent = btnBg
        
        btn.MouseButton1Click:Connect(function()
            state = not state
            toggleIndicator.BackgroundColor3 = state and colors.success or colors.danger
            callback(state)
        end)
        
        return btnFrame
    end
    
    -- Fun√ß√£o para criar slider
    local function createSlider(name, description, min, max, default, yOffset, callback)
        local sliderFrame = Instance.new("Frame")
        sliderFrame.Name = name .. "Slider"
        sliderFrame.Size = UDim2.new(1, 0, 0, 45)
        sliderFrame.Position = UDim2.new(0, 0, 0, yOffset)
        sliderFrame.BackgroundTransparency = 1
        sliderFrame.Parent = content
        
        local bg = Instance.new("Frame")
        bg.Name = "Background"
        bg.Size = UDim2.new(1, 0, 1, -5)
        bg.BackgroundColor3 = colors.secondary
        bg.BorderSizePixel = 0
        bg.Parent = sliderFrame
        
        local UICorner = Instance.new("UICorner")
        UICorner.CornerRadius = UDim.new(0, 6)
        UICorner.Parent = bg
        
        local label = Instance.new("TextLabel")
        label.Name = "Label"
        label.Size = UDim2.new(1, -20, 0, 20)
        label.Position = UDim2.new(0, 10, 0, 5)
        label.BackgroundTransparency = 1
        label.Text = name .. ": " .. tostring(default)
        label.TextColor3 = colors.text
        label.Font = Enum.Font.Gotham
        label.TextSize = 14
        label.TextXAlignment = Enum.TextXAlignment.Left
        label.Parent = bg
        
        local sliderBg = Instance.new("Frame")
        sliderBg.Name = "SliderBg"
        sliderBg.Size = UDim2.new(1, -40, 0, 10)
        sliderBg.Position = UDim2.new(0, 10, 0, 28)
        sliderBg.BackgroundColor3 = Color3.fromRGB(60, 60, 70)
        sliderBg.BorderSizePixel = 0
        sliderBg.Parent = bg
        
        local sliderCorner = Instance.new("UICorner")
        sliderCorner.CornerRadius = UDim.new(1, 0)
        sliderCorner.Parent = sliderBg
        
        local sliderFill = Instance.new("Frame")
        sliderFill.Name = "SliderFill"
        sliderFill.Size = UDim2.new((default - min) / (max - min), 0, 1, 0)
        sliderFill.BackgroundColor3 = colors.primary
        sliderFill.BorderSizePixel = 0
        sliderFill.Parent = sliderBg
        
        local fillCorner = Instance.new("UICorner")
        fillCorner.CornerRadius = UDim.new(1, 0)
        fillCorner.Parent = sliderFill
        
        local value = default
        
        -- Bot√µes + e -
        local minusBtn = Instance.new("TextButton")
        minusBtn.Name = "Minus"
        minusBtn.Size = UDim2.new(0, 25, 0, 25)
        minusBtn.Position = UDim2.new(1, -60, 0, 23)
        minusBtn.BackgroundColor3 = colors.danger
        minusBtn.Text = "-"
        minusBtn.TextColor3 = colors.text
        minusBtn.Font = Enum.Font.GothamBold
        minusBtn.TextSize = 18
        minusBtn.Parent = bg
        
        local minusCorner = Instance.new("UICorner")
        minusCorner.CornerRadius = UDim.new(0, 4)
        minusCorner.Parent = minusBtn
        
        local plusBtn = Instance.new("TextButton")
        plusBtn.Name = "Plus"
        plusBtn.Size = UDim2.new(0, 25, 0, 25)
        plusBtn.Position = UDim2.new(1, -30, 0, 23)
        plusBtn.BackgroundColor3 = colors.success
        plusBtn.Text = "+"
        plusBtn.TextColor3 = colors.text
        plusBtn.Font = Enum.Font.GothamBold
        plusBtn.TextSize = 18
        plusBtn.Parent = bg
        
        local plusCorner = Instance.new("UICorner")
        plusCorner.CornerRadius = UDim.new(0, 4)
        plusCorner.Parent = plusBtn
        
        minusBtn.MouseButton1Click:Connect(function()
            value = math.max(min, value - 5)
            sliderFill.Size = UDim2.new((value - min) / (max - min), 0, 1, 0)
            label.Text = name .. ": " .. tostring(value)
            callback(value)
        end)
        
        plusBtn.MouseButton1Click:Connect(function()
            value = math.min(max, value + 5)
            sliderFill.Size = UDim2.new((value - min) / (max - min), 0, 1, 0)
            label.Text = name .. ": " .. tostring(value)
            callback(value)
        end)
        
        return sliderFrame
    end
    
    -- Criar bot√µes
    createToggleButton("AIMBOT", "Ativar/desativar mira autom√°tica", false, yPos, function(state)
        aimbotEnabled = state
    end)
    yPos = yPos + spacing
    
    createToggleButton("FOV VIS√çVEL", "Mostrar/esconder c√≠rculo FOV", true, yPos, function(state)
        fovVisible = state
        if fovCircle then
            fovCircle.Visible = state
        end
    end)
    yPos = yPos + spacing
    
    createToggleButton("TEAM CHECK", "N√£o mirar em aliados", false, yPos, function(state)
        teamCheck = state
    end)
    yPos = yPos + spacing
    
    createToggleButton("WALL CHECK", "N√£o mirar atrav√©s de paredes", false, yPos, function(state)
        wallCheck = state
    end)
    yPos = yPos + spacing
    
    -- Sliders
    createSlider("FOV RAIO", "Tamanho do c√≠rculo", 30, 300, fovRadius, yPos, function(value)
        fovRadius = value
    end)
    yPos = yPos + spacing
    
    createSlider("SUAVIZA√á√ÉO", "Velocidade da mira", 0.1, 1, smoothness * 10, yPos, function(value)
        smoothness = value / 10
    end)
    yPos = yPos + spacing
    
    -- Dropdown para parte do corpo
    local partFrame = Instance.new("Frame")
    partFrame.Name = "PartSelector"
    partFrame.Size = UDim2.new(1, 0, 0, 35)
    partFrame.Position = UDim2.new(0, 0, 0, yPos)
    partFrame.BackgroundTransparency = 1
    partFrame.Parent = content
    
    local partBg = Instance.new("Frame")
    partBg.Size = UDim2.new(1, 0, 1, -5)
    partBg.BackgroundColor3 = colors.secondary
    partBg.BorderSizePixel = 0
    partBg.Parent = partFrame
    
    local partCorner = Instance.new("UICorner")
    partCorner.CornerRadius = UDim.new(0, 6)
    partCorner.Parent = partBg
    
    local partLabel = Instance.new("TextLabel")
    partLabel.Size = UDim2.new(0.5, -10, 1, 0)
    partLabel.Position = UDim2.new(0, 10, 0, 0)
    partLabel.BackgroundTransparency = 1
    partLabel.Text = "PARTE:"
    partLabel.TextColor3 = colors.text
    partLabel.Font = Enum.Font.Gotham
    partLabel.TextSize = 14
    partLabel.TextXAlignment = Enum.TextXAlignment.Left
    partLabel.Parent = partBg
    
    local partDropdown = Instance.new("TextButton")
    partDropdown.Name = "Dropdown"
    partDropdown.Size = UDim2.new(0.4, 0, 0, 25)
    partDropdown.Position = UDim2.new(0.5, 10, 0.5, -12.5)
    partDropdown.BackgroundColor3 = colors.primary
    partDropdown.Text = "Head"
    partDropdown.TextColor3 = colors.text
    partDropdown.Font = Enum.Font.Gotham
    partDropdown.TextSize = 14
    partDropdown.Parent = partBg
    
    local dropdownCorner = Instance.new("UICorner")
    dropdownCorner.CornerRadius = UDim.new(0, 4)
    dropdownCorner.Parent = partDropdown
    
    local parts = {"Head", "Torso", "HumanoidRootPart", "Left Arm", "Right Arm"}
    local currentPartIndex = 1
    
    partDropdown.MouseButton1Click:Connect(function()
        currentPartIndex = currentPartIndex % #parts + 1
        targetPart = parts[currentPartIndex]
        partDropdown.Text = targetPart
    end)
    
    return gui
end

-- Criar c√≠rculo FOV
local function createFovCircle()
    local success, drawing = pcall(function() return Drawing end)
    if success and drawing then
        fovCircle = drawing.new("Circle")
        fovCircle.Thickness = 2
        fovCircle.NumSides = 64
        fovCircle.Radius = fovRadius
        fovCircle.Filled = false
        fovCircle.Visible = fovVisible
        fovCircle.ZIndex = 999
        fovCircle.Color = colors.primary
        fovCircle.Transparency = 0.5
    end
end

-- Verificar se pode mirar no alvo
local function canTarget(player)
    if player == LocalPlayer then return false end
    if not player.Character then return false end
    
    local humanoid = player.Character:FindFirstChild("Humanoid")
    if not humanoid or humanoid.Health <= 0 then return false end
    
    -- Team check
    if teamCheck and player.Team and LocalPlayer.Team then
        if player.Team == LocalPlayer.Team then
            return false
        end
    end
    
    return true
end

-- Verificar se tem parede no caminho
local function isVisible(targetPos)
    if not wallCheck then return true end
    
    local cameraPos = Camera.CFrame.Position
    local direction = (targetPos - cameraPos).Unit
    local ray = Ray.new(cameraPos, direction * (cameraPos - targetPos).Magnitude)
    
    local hit, position = workspace:FindPartOnRayWithIgnoreList(ray, {LocalPlayer.Character, Camera})
    
    return hit == nil
end

-- Fun√ß√£o principal do aimbot
local function aimbotLoop()
    if not aimbotEnabled then return end
    
    -- Atualizar c√≠rculo FOV
    if fovCircle and fovCircle.Visible then
        fovCircle.Radius = fovRadius
        fovCircle.Position = Vector2.new(Camera.ViewportSize.X / 2, Camera.ViewportSize.Y / 2)
    end
    
    -- Encontrar melhor alvo
    local bestTarget = nil
    local shortestDist = fovRadius
    local center = Vector2.new(Camera.ViewportSize.X / 2, Camera.ViewportSize.Y / 2)
    
    for _, player in ipairs(Players:GetPlayers()) do
        if canTarget(player) then
            local character = player.Character
            local part = character:FindFirstChild(targetPart) or character:FindFirstChild("Head")
            
            if part then
                local pos, onScreen = Camera:WorldToViewportPoint(part.Position)
                
                if onScreen then
                    local screenPoint = Vector2.new(pos.X, pos.Y)
                    local distFromCenter = (screenPoint - center).Magnitude
                    
                    if distFromCenter <= fovRadius and distFromCenter < shortestDist then
                        if isVisible(part.Position) then
                            shortestDist = distFromCenter
                            bestTarget = player
                        end
                    end
                end
            end
        end
    end
    
    -- Aplicar aimbot no alvo
    if bestTarget and bestTarget.Character then
        local character = bestTarget.Character
        local target = character:FindFirstChild(targetPart) or character:FindFirstChild("Head")
        
        if target then
            local currentCF = Camera.CFrame
            local targetCF = CFrame.lookAt(currentCF.Position, target.Position)
            Camera.CFrame = currentCF:Lerp(targetCF, smoothness)
        end
    end
end

-- Iniciar tudo
local function initialize()
    -- Criar menu
    local menu = createMenu()
    
    -- Criar c√≠rculo FOV
    createFovCircle()
    
    -- Iniciar loop
    RunService.RenderStepped:Connect(aimbotLoop)
    
    print("‚úÖ Aimbot Universal carregado com sucesso!")
    print("üìå Menu criado no centro da tela")
end

-- Executar
initialize()
